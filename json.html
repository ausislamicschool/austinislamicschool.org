<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sample FirebaseUI App</title>
    <link href="assets/css/style.css" rel="stylesheet" />
    <link href="assets/color/default.css" rel="stylesheet" />
    <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/7.0.0/firebase-app.js"></script>

  <!-- TODO: Add SDKs for Firebase products that you want to use https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="https://www.gstatic.com/firebasejs/7.0.0/firebase-analytics.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.0.0/firebase-auth.js"></script>

  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyA4Sqh3MystF1Rl98BhexRfoq0Y1rndRgg",
      authDomain: "ais-web-1569871533160.firebaseapp.com",
      databaseURL: "https://ais-web-1569871533160.firebaseio.com",
      projectId: "ais-web-1569871533160",
      storageBucket: "",
      messagingSenderId: "873272269253",
      appId: "1:873272269253:web:0bb8c5d6ca29f6013f53ac",
      measurementId: "G-ZJJKQCV2G6"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
  </script>
    <script type="text/javascript">
      initApp = function() {
        firebase.auth().onAuthStateChanged(function(user) {
          if (user) {
            // User is signed in.
            var displayName = user.displayName;
            var email = user.email;
            var emailVerified = user.emailVerified;
            var photoURL = user.photoURL;
            var uid = user.uid;
            var phoneNumber = user.phoneNumber;
            var providerData = user.providerData;
            user.getIdToken().then(function(accessToken) {
              document.getElementById('sign-in-status').textContent = 'Signed in';
              document.getElementById('sign-in').textContent = 'Sign out';
              document.getElementById('account-details').textContent = JSON.stringify({
                displayName: displayName,
                email: email,
                emailVerified: emailVerified,
                phoneNumber: phoneNumber,
                photoURL: photoURL,
                uid: uid,
                accessToken: accessToken,
                providerData: providerData
              }, null, '  ');
            });
          } else {
            // User is signed out.
            document.getElementById('sign-in-status').textContent = 'Signed out';
            document.getElementById('sign-in').textContent = 'Sign in';
            document.getElementById('account-details').textContent = 'null';
          }
        }, function(error) {
          console.log(error);
        });
      };

      window.addEventListener('load', function() {
        initApp();
      });
    </script>
    <script type="text/javascript">
      // Client ID and API key from the Developer Console
      var CLIENT_ID = '873272269253-ke43af0odpivkleo24ebdhugq7pddan9.apps.googleusercontent.com';
      var API_KEY = 'AIzaSyASDu4NLlScfp0O89PJrjMxU4fm7bp606Y';

      // Array of API discovery doc URLs for APIs used by the quickstart
      var DISCOVERY_DOCS = ["https://sheets.googleapis.com/$discovery/rest?version=v4"];

      // Authorization scopes required by the API; multiple scopes can be
      // included, separated by spaces.
      var SCOPES = "https://www.googleapis.com/auth/spreadsheets";

      function handleClientLoad() {
        gapi.load('client:auth2', initClient);
      }

      /**
       *  Initializes the API client library and sets up sign-in state
       *  listeners.
       */
      function initClient() {
        gapi.client.init({
          apiKey: API_KEY,
          clientId: CLIENT_ID,
          discoveryDocs: DISCOVERY_DOCS,
          scope: SCOPES
        }).then(function () {
          // Listen for sign-in state changes.
          gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

          // Handle the initial sign-in state.
          updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
        }, function(error) {
          appendPre(JSON.stringify(error, null, 2));
        });
      }

      /**
       *  Called when the signed in status changes, to update the UI
       *  appropriately. After a sign-in, the API is called.
       */
      function updateSigninStatus(isSignedIn) {
        if (isSignedIn) {
          console.log(`Signed in.`)
        } else {
          console.log(`Signed out.`)
        }
      }

        function toJSONString( form ) {
        var obj = {};
        var elements = form.querySelectorAll( "input, select, textarea" );
        for( var i = 0; i < elements.length; ++i ) {
          var element = elements[i];
          var name = element.name;
          var value = element.value;

          if( name ) {
            obj[ name ] = value;
          }
        }

        gapi.client.sheets.spreadsheets.values.append({
         spreadsheetId: '1-Y17QgF-O3yFMIPXUGCUFrOjVkjVvmsLi-18IGo-Uoo',
         range: 'Sheet1',
         valueInputOption: 'USER_ENTERED',
         resource: body
      }).then((response) => {
        var result = response.result;
        console.log(`${result.updates.updatedCells} cells appended.`)
      });

        return JSON.stringify( obj );
      }

      document.addEventListener( "DOMContentLoaded", function() {
        var form = document.getElementById( "test" );
        var output = document.getElementById( "output" );
        form.addEventListener( "submit", function( e ) {
          e.preventDefault();
          var json = toJSONString( this );
          output.innerHTML = json;

        }, false);

      });
    </script>
    <style type="text/css">
      body {
      margin: 2em;
      max-width: 600px;
      }

      form div {
          margin-bottom: 0.5em;
      }
      form div label, form div input {
          display: block;
          margin-bottom: 0.3em;
      }
    </style>
  </head>
  <body>

    <h1>Welcome to My Awesome App</h1>
    <div id="sign-in-status"></div>
    <div id="sign-in"></div>
    <pre id="account-details"></pre>

    <form id="test" action="#" method="post">
    <div class="form-group">
        <label for="name">Name</label>
        <input class="form-control" type="text" name="name" id="name" />
    </div>
    <div class="form-group">
      <label for="check">Check if you like JavaScript</label>
      <input type="checkbox" name="check" value="yes" />
    </div>
    <div class="form-group">
      <label for="select">Select your favorite JavaScript framework</label>
      <select name="select" class="form-control">
        <option value="none" selected="selected">None</option>
        <option value="jquery">jQuery</option>
        <option value="angularjs">Angular</option>
        <option value="mine">Mine, of course!</option>
      </select>

    </div>
    <div class="form-group">
      <label for="message">Leave a message</label>
      <textarea class="form-control" name="message" rows="15" cols="30"></textarea>
    </div>
    <div class="form-group">
        <label for="email">Email</label>
        <input class="form-control" type="text" name="email" id="email" />
    </div>
    <div class="form-group">
        <label for="password">Password</label>
        <input class="form-control" type="password" name="password" id="password" />
    </div>
    <p>
        <input type="submit" value="Send" class="btn btn-primary btn-block" />
    </p>
</form> 
<pre id="output"></pre>

<script async defer src="https://apis.google.com/js/api.js"
      onload="this.onload=function(){};handleClientLoad()"
      onreadystatechange="if (this.readyState === 'complete') this.onload()">
    </script>
  </body>
</html>